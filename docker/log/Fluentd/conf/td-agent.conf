####
## Output descriptions:
##

# Treasure Data (http://www.treasure-data.com/) provides cloud based data
# analytics platform, which easily stores and processes data from td-agent.
# FREE plan is also provided.
# @see http://docs.fluentd.org/articles/http-to-td
#
# This section matches events whose tag is td.DATABASE.TABLE
## match tag=debug.** and dump to console
<match mylibrary.**>
	type copy
	<store>
		type format
		tag formatted.mylibrary
		include_original_fields false
		formatted-output %{time}	%{level}	-	%{msg}
	</store>
	<store>
		type mongo

		host mongo
		port 27017
		database log
		collection mylibrary

		capped
		capped_size 1024m
	</store>
</match>

<match formatted.mylibrary>
	type file
	path /app/logs/mylibrary/fluentd.full
	format single_value
	message_key formatted-output
</match>

####
## Source descriptions:
##
<source>
	type forward
	port 2000
	bind 0.0.0.0
</source>
